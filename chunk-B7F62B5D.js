import{$ as U,O as v,Q as R,T as M,U as D,X as N,Z as P,a as E,aa as W,ba as B,ca as j,g as L,i as h,j as S}from"./chunk-4PZVSR2N.js";import{Bb as b,Cb as A,D as F,Db as I,Ia as w,Ja as g,Z as c,_ as d,ca as m,e as k,ia as u,ja as f,jb as n,kb as r,o as C,ob as _,rc as T,s as x,xb as s}from"./chunk-AEVJW2TO.js";var y=(()=>{class t{constructor(i){this.http=i}login(i,e){let o=encodeURIComponent(i),l=encodeURIComponent(e);return this.http.get(`${j.baseApiUri}/Admin/login?login=${o}&password=${l}`,{responseType:"text"})}checkToken(){return this.http.get(`${j.baseApiUri}/Admin/verify`)}static{this.\u0275fac=function(e){return new(e||t)(m(E))}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var O=(()=>{class t{constructor(i,e,o){this.userService=i,this.route=e,this.router=o,this.login="",this.password="",this.subscription=new k}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}onLogin(){this.subscription.add(this.userService.login(this.login,this.password).subscribe(i=>{localStorage.setItem("token",i),console.log("token taken"),this.router.navigate(["panel"],{relativeTo:this.route})}))}static{this.\u0275fac=function(e){return new(e||t)(g(y),g(L),g(h))}}static{this.\u0275cmp=u({type:t,selectors:[["app-admin"]],decls:18,vars:2,consts:[[1,"d-flex","justify-content-center"],[1,"bg-secondary","mt-2"],[1,"text-white","px-lg-5","pt-1"],["matInput","","placeholder","Login",3,"ngModelChange","ngModel"],["matInput","","type","password","placeholder","Has\u0142o",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center","mb-2"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),s(4,"Zaloguj si\u0119 jako administrator"),r(),n(5,"div",0)(6,"mat-form-field")(7,"mat-label"),s(8,"Login"),r(),n(9,"input",3),I("ngModelChange",function(a){return A(o.login,a)||(o.login=a),a}),r()()(),n(10,"div",0)(11,"mat-form-field")(12,"mat-label"),s(13,"Has\u0142o"),r(),n(14,"input",4),I("ngModelChange",function(a){return A(o.password,a)||(o.password=a),a}),r()()()(),n(15,"div",5)(16,"button",6),_("click",function(){return o.onLogin()}),s(17,"Zaloguj si\u0119"),r()()()()),e&2&&(w(9),b("ngModel",o.login),w(5),b("ngModel",o.password))},dependencies:[M,W,R,D,N,P,v]})}}return t})();var V=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-admin-panel"]],decls:2,vars:0,template:function(e,o){e&1&&(n(0,"p"),s(1,"admin-panel works!"),r())}})}}return t})();var Z=(()=>{class t{constructor(i,e){this.userService=i,this.router=e}canActivate(){return localStorage.getItem("token")?this.userService.checkToken().pipe(x(e=>e.isValid?!0:(localStorage.removeItem("token"),this.router.navigate([".."]),!1)),F(e=>(localStorage.removeItem("token"),this.router.navigate([".."]),C(!1)))):(this.router.navigate([".."]),C(!1))}static{this.\u0275fac=function(e){return new(e||t)(m(y),m(h))}}static{this.\u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var z=[{path:"",component:O},{path:"panel",component:V,canActivate:[Z]}],G=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=f({type:t})}static{this.\u0275inj=d({imports:[S.forChild(z),S]})}}return t})();var yt=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=f({type:t})}static{this.\u0275inj=d({imports:[T,G,M,B,U,v]})}}return t})();export{yt as AdminModule};

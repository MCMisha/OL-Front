import{a as z,b as d,c as U,e as B,g as N,i as Q,j as D}from"./chunk-OD5JZLBF.js";import{Aa as v,B as L,a as E,ba as R,i as T,j as $,k as F}from"./chunk-HEVZDF4Y.js";import{D as _,Eb as x,Fc as w,Gb as h,Gc as A,Hc as j,Kb as P,Lb as S,Mb as O,Ob as s,Pb as g,Ua as r,Va as I,_ as p,da as l,e as b,ja as y,kb as f,mb as c,o as u,s as M,vb as a,wb as o,xb as k}from"./chunk-YYWJVD6A.js";function H(e,C){if(e&1&&(a(0,"span"),s(1),o()),e&2){let t=h().$implicit;r(),g(t.title)}}function J(e,C){if(e&1&&(a(0,"mat-nav-list")(1,"a",5)(2,"span",6)(3,"mat-icon"),s(4),o(),f(5,H,2,1,"span",7),o()()()),e&2){let t=C.$implicit,i=h();r(),c("routerLink",t.link),r(3),g(t.icon),r(),c("ngIf",!i.isCollapsed)}}var ae=(()=>{class e{constructor(t){this.observer=t,this.isMobile=!1,this.basePath="/admin/panel",this.menuItems=[{icon:"home",title:"Strona g\u0142owna",link:`${this.basePath}/main`},{icon:"theater_comedy",title:"Gatunki",link:`${this.basePath}/genre`}],this.subscription=new b,this.isCollapsed=!0}ngOnInit(){this.observer.observe(["(max-width: 800px)"]).subscribe(t=>{t.matches?this.isMobile=!0:this.isMobile=!1})}ngOnDestroy(){this.subscription.unsubscribe()}toggleMenu(){this.isMobile?(this.sidenav.toggle(),this.isCollapsed=!1):(this.sidenav.open(),this.isCollapsed=!this.isCollapsed)}static{this.\u0275fac=function(i){return new(i||e)(I(L))}}static{this.\u0275cmp=y({type:e,selectors:[["app-admin-panel"]],viewQuery:function(i,n){if(i&1&&P(d,5),i&2){let m;S(m=O())&&(n.sidenav=m.first)}},decls:13,vars:4,consts:[["color","primary"],["mat-icon-button","","aria-label","Menu icon",3,"click"],["autosize",""],[3,"ngClass","mode","opened"],[4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],[1,"entry"],[4,"ngIf"]],template:function(i,n){i&1&&(a(0,"mat-toolbar",0)(1,"button",1),x("click",function(){return n.toggleMenu()}),a(2,"mat-icon"),s(3,"menu"),o()(),a(4,"h1"),s(5,"System zarz\u0105dzania tre\u015Bci\u0105 Opery Lubelskiej"),o()(),a(6,"mat-sidenav-container",2)(7,"mat-sidenav",3),f(8,J,6,3,"mat-nav-list",4),o(),a(9,"mat-sidenav-content")(10,"h2"),s(11,"Tre\u015B\u0107"),o(),k(12,"router-outlet"),o()()),i&2&&(r(7),c("ngClass",n.isCollapsed?"":"expanded")("mode",n.isMobile?"over":"side")("opened",n.isMobile?"false":"true"),r(),c("ngForOf",n.menuItems))},dependencies:[w,A,j,T,F,B,R,N,d,U,z,D,Q],styles:["h1[_ngcontent-%COMP%]{padding:0 1rem}h2[_ngcontent-%COMP%]{padding:1rem}mat-toolbar[_ngcontent-%COMP%]{position:fixed;top:0;z-index:2}mat-sidenav-container[_ngcontent-%COMP%]{height:100%}.expanded[_ngcontent-%COMP%]{width:250px}mat-sidenav[_ngcontent-%COMP%]{padding-top:3.5rem}@media screen and (min-width: 600px){mat-sidenav[_ngcontent-%COMP%]{padding-top:4rem}}mat-sidenav[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem}mat-sidenav-content[_ngcontent-%COMP%]{padding-top:3.5rem}@media screen and (min-width: 600px){mat-sidenav-content[_ngcontent-%COMP%]{padding-top:4rem}}"]})}}return e})();var q=(()=>{class e{constructor(t){this.http=t}login(t,i){let n=encodeURIComponent(t),m=encodeURIComponent(i);return this.http.get(`${v.baseApiUri}/Admin/login?login=${n}&password=${m}`,{responseType:"text"})}checkToken(){return this.http.get(`${v.baseApiUri}/Admin/verify`)}static{this.\u0275fac=function(i){return new(i||e)(l(E))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var pe=(()=>{class e{constructor(t,i){this.userService=t,this.router=i}canActivate(){return localStorage.getItem("token")?this.userService.checkToken().pipe(M(i=>i.isValid?!0:(localStorage.removeItem("token"),this.router.navigate([".."]),!1)),_(i=>(localStorage.removeItem("token"),this.router.navigate([".."]),u(!1)))):(this.router.navigate([".."]),u(!1))}static{this.\u0275fac=function(i){return new(i||e)(l(q),l($))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{q as a,ae as b,pe as c};

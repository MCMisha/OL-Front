import{Ba as O,Ea as A,Ia as L,Ja as I,Ka as F,Ma as H,Na as D,xa as R,ya as P}from"./chunk-Q53X4CUR.js";import{Ab as m,Eb as M,Hb as d,Oc as v,Pb as f,Qb as h,Rb as _,Tb as u,Wb as C,Xa as g,Xb as w,Ya as E,Yb as b,Zb as V,ba as T,cb as S,la as k,ma as x,rb as y,ta as s,ua as c,yb as o,zb as l}from"./chunk-DQM3UAK6.js";var j=["editableContent"],W=["imageInput"],Q=["linkInput"],q=(()=>{class p{constructor(t){this.renderer=t,this.content="",this.textColor="#000000",this.backgroundColor="#ffffff",this.fontSize="3",this.fontFamily="Arial, sans-serif",this.textAlign="left",this.isSourceView=!1,this.selection=null,this.onChange=()=>{},this.onTouch=()=>{}}ngOnInit(){this.setupImagePasteHandler(),this.setupSelectionSaver()}ngAfterViewInit(){this.makeContentEditable(),this.editableContent.nativeElement.addEventListener("blur",()=>{this.onTouch()})}setupSelectionSaver(){document.addEventListener("mouseup",()=>{let t=window.getSelection();t&&t.rangeCount>0&&(this.selection=t.getRangeAt(0).cloneRange())})}makeContentEditable(){this.renderer.setAttribute(this.editableContent.nativeElement,"contenteditable","true"),this.renderer.setStyle(this.editableContent.nativeElement,"min-height","200px")}writeValue(t){this.content=t||"",this.editableContent&&(this.editableContent.nativeElement.innerHTML=this.content)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}formatText(t,i){let e=i;i?.target&&(e=i.target.value),t==="formatBlock"&&(e=`<${e}>`),document.execCommand(t,!1,e),this.onContentChange()}applyFormat(t){this.formatText(t)}setTextColor(t){let i=t.target.value;if(this.textColor=i,this.selection){let e=window.getSelection();e?.removeAllRanges(),e?.addRange(this.selection)}document.execCommand("foreColor",!1,i),this.onContentChange()}setBackgroundColor(t){let i=t.target.value;if(this.backgroundColor=i,this.selection){let e=window.getSelection();e?.removeAllRanges(),e?.addRange(this.selection)}document.execCommand("hiliteColor",!1,i),this.onContentChange()}onContentChange(){let t=this.editableContent.nativeElement.innerHTML;this.content=t,this.onChange(t);let i=window.getSelection();i&&i.rangeCount>0&&(this.selection=i.getRangeAt(0).cloneRange())}changeFontSize(t){let i=t.target.value;this.formatText("fontSize",i)}changeFontFamily(t){let i=t.target.value;this.formatText("fontName",i)}onKeyDown(t){t.key==="Tab"&&(t.preventDefault(),this.formatText("insertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"))}onPaste(t){t.preventDefault();let i=t.clipboardData?.getData("text/plain")||"";this.formatText("insertText",i)}onImageSelected(t){let i=t.target.files?.[0];if(console.log(i),i){let e=new FileReader;e.onload=n=>{if(this.selection){let a=window.getSelection();a?.removeAllRanges(),a?.addRange(this.selection)}let r=`<img src="${n.target?.result}" style="max-width: 100%;">`;this.formatText("insertHTML",r)},e.readAsDataURL(i)}}setAlignment(t){this.formatText("justifyLeft"),t!=="left"&&this.formatText(`justify${t.charAt(0).toUpperCase()+t.slice(1)}`)}insertLink(){let t=prompt("Enter URL:");t&&this.formatText("createLink",t)}insertTable(){let t=prompt("Enter number of rows:","3"),i=prompt("Enter number of columns:","3");if(t&&i){let e='<table style="border-collapse: collapse; width: 100%;">';for(let n=0;n<parseInt(t);n++){e+="<tr>";for(let r=0;r<parseInt(i);r++)e+='<td style="border: 1px solid #ccc; padding: 8px;">&nbsp;</td>';e+="</tr>"}e+="</table>",this.formatText("insertHTML",e)}}insertImage(){this.imageInput.nativeElement.click()}toggleSourceView(){if(this.isSourceView=!this.isSourceView,this.isSourceView){let t=this.editableContent.nativeElement.innerHTML;this.editableContent.nativeElement.textContent=t}else{let t=this.editableContent.nativeElement.textContent||"";this.editableContent.nativeElement.innerHTML=t}}setupImagePasteHandler(){this.editableContent.nativeElement.addEventListener("paste",t=>{let i=t.clipboardData?.items;if(i){for(let e=0;e<i.length;e++)if(i[e].type.indexOf("image")!==-1){t.preventDefault();let n=i[e].getAsFile();if(n){let r=new FileReader;r.onload=a=>{let N=`<img src="${a.target?.result}" style="max-width: 100%;">`;this.formatText("insertHTML",N)},r.readAsDataURL(n)}break}}})}static{this.\u0275fac=function(i){return new(i||p)(E(S))}}static{this.\u0275cmp=k({type:p,selectors:[["app-rich-text-editor"]],viewQuery:function(i,e){if(i&1&&(f(j,7),f(W,5),f(Q,5)),i&2){let n;h(n=_())&&(e.editableContent=n.first),h(n=_())&&(e.imageInput=n.first),h(n=_())&&(e.linkInput=n.first)}},features:[V([{provide:R,useExisting:p,multi:!0}])],decls:70,vars:5,consts:[["imageInput",""],["editableContent",""],[1,"rich-editor-container"],[1,"toolbar"],[3,"change"],["value","p"],["value","h1"],["value","h2"],["value","h3"],["name","fontFamily",3,"ngModelChange","change","ngModel"],["value","Arial, sans-serif"],["value","Times New Roman, serif"],["value","Courier New, monospace"],["value","Arial"],["value","Helvetica"],["value","Times New Roman"],["value","Courier"],["title","Bold",3,"click"],[1,"fas","fa-bold"],["title","Italic",3,"click"],[1,"fas","fa-italic"],["title","Underline",3,"click"],[1,"fas","fa-underline"],["title","Strike Through",3,"click"],[1,"fas","fa-strikethrough"],[1,"color-picker"],["type","color","title","Text Color",3,"ngModelChange","change","ngModel"],[1,"color-indicator"],["type","color","title","Background Color",3,"ngModelChange","change","ngModel"],["title","Align Left",3,"click"],[1,"fas","fa-align-left"],["title","Align Center",3,"click"],[1,"fas","fa-align-center"],["title","Align Right",3,"click"],[1,"fas","fa-align-right"],["title","Justify",3,"click"],[1,"fas","fa-align-justify"],["title","Numbered List",3,"click"],[1,"fas","fa-list-ol"],["title","Bullet List",3,"click"],[1,"fas","fa-list-ul"],["title","Increase Indent",3,"click"],[1,"fas","fa-indent"],["title","Decrease Indent",3,"click"],[1,"fas","fa-outdent"],["title","Insert Link",3,"click"],[1,"fas","fa-link"],["title","Insert Image",3,"click"],[1,"fas","fa-image"],["title","Insert Table",3,"click"],[1,"fas","fa-table"],["title","Source Code",3,"click"],[1,"fas","fa-code"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"editor-content",3,"input","keydown","paste"]],template:function(i,e){if(i&1){let n=M();o(0,"div",2)(1,"div",3)(2,"select",4),d("change",function(a){return s(n),c(e.formatText("formatBlock",a))}),o(3,"option",5),u(4,"Normal"),l(),o(5,"option",6),u(6,"Heading 1"),l(),o(7,"option",7),u(8,"Heading 2"),l(),o(9,"option",8),u(10,"Heading 3"),l()(),o(11,"select",9),b("ngModelChange",function(a){return s(n),w(e.fontFamily,a)||(e.fontFamily=a),c(a)}),d("change",function(a){return s(n),c(e.changeFontFamily(a))}),o(12,"option",10),u(13,"Sans Serif"),l(),o(14,"option",11),u(15,"Serif"),l(),o(16,"option",12),u(17,"Monospace"),l(),o(18,"option",13),u(19,"Arial"),l(),o(20,"option",14),u(21,"Helvetica"),l(),o(22,"option",15),u(23,"Times New Roman"),l(),o(24,"option",16),u(25,"Courier"),l()(),o(26,"button",17),d("click",function(){return s(n),c(e.applyFormat("bold"))}),m(27,"i",18),l(),o(28,"button",19),d("click",function(){return s(n),c(e.applyFormat("italic"))}),m(29,"i",20),l(),o(30,"button",21),d("click",function(){return s(n),c(e.applyFormat("underline"))}),m(31,"i",22),l(),o(32,"button",23),d("click",function(){return s(n),c(e.applyFormat("strikeThrough"))}),m(33,"i",24),l(),o(34,"div",25)(35,"input",26),b("ngModelChange",function(a){return s(n),w(e.textColor,a)||(e.textColor=a),c(a)}),d("change",function(a){return s(n),c(e.setTextColor(a))}),l(),o(36,"span",27),u(37,"A"),l()(),o(38,"div",25)(39,"input",28),b("ngModelChange",function(a){return s(n),w(e.backgroundColor,a)||(e.backgroundColor=a),c(a)}),d("change",function(a){return s(n),c(e.setBackgroundColor(a))}),l(),o(40,"span",27),u(41,"BG"),l()(),o(42,"button",29),d("click",function(){return s(n),c(e.setAlignment("left"))}),m(43,"i",30),l(),o(44,"button",31),d("click",function(){return s(n),c(e.setAlignment("center"))}),m(45,"i",32),l(),o(46,"button",33),d("click",function(){return s(n),c(e.setAlignment("right"))}),m(47,"i",34),l(),o(48,"button",35),d("click",function(){return s(n),c(e.setAlignment("justify"))}),m(49,"i",36),l(),o(50,"button",37),d("click",function(){return s(n),c(e.formatText("insertOrderedList"))}),m(51,"i",38),l(),o(52,"button",39),d("click",function(){return s(n),c(e.formatText("insertUnorderedList"))}),m(53,"i",40),l(),o(54,"button",41),d("click",function(){return s(n),c(e.formatText("indent"))}),m(55,"i",42),l(),o(56,"button",43),d("click",function(){return s(n),c(e.formatText("outdent"))}),m(57,"i",44),l(),o(58,"button",45),d("click",function(){return s(n),c(e.insertLink())}),m(59,"i",46),l(),o(60,"button",47),d("click",function(){return s(n),c(e.insertImage())}),m(61,"i",48),l(),o(62,"button",49),d("click",function(){return s(n),c(e.insertTable())}),m(63,"i",50),l(),o(64,"button",51),d("click",function(){return s(n),c(e.toggleSourceView())}),m(65,"i",52),l()(),o(66,"input",53,0),d("change",function(a){return s(n),c(e.onImageSelected(a))}),l(),o(68,"div",54,1),d("input",function(){return s(n),c(e.onContentChange())})("keydown",function(a){return s(n),c(e.onKeyDown(a))})("paste",function(a){return s(n),c(e.onPaste(a))}),l()()}i&2&&(g(11),C("ngModel",e.fontFamily),g(24),C("ngModel",e.textColor),g(4),C("ngModel",e.backgroundColor),g(29),y("source-view",e.isSourceView))},dependencies:[I,F,P,L,O,A],styles:[".rich-editor-container[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;background:#fff;margin:20px 0}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;padding:10px;background:#f8fafc;border-bottom:1px solid #e2e8f0;border-radius:8px 8px 0 0}.toolbar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:32px;padding:0 8px;border:1px solid #ccc;border-radius:4px;background-color:#fff;font-size:14px}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:32px;min-width:32px;padding:0 8px;border:1px solid #ccc;border-radius:4px;background-color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:#d9d9d9}.color-picker[_ngcontent-%COMP%]{position:relative;display:inline-block}.color-picker[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:32px;height:32px;padding:0;border:1px solid #ccc;border-radius:4px;cursor:pointer}.color-picker[_ngcontent-%COMP%]   .color-indicator[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;font-size:12px;font-weight:700}.editor-content[_ngcontent-%COMP%]{min-height:200px;padding:16px;background-color:#fff;overflow-y:auto}.editor-content[_ngcontent-%COMP%]:focus{outline:none}.editor-content.source-view[_ngcontent-%COMP%]{font-family:monospace;white-space:pre-wrap}.editor-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin:8px 0}.editor-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px}.editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.editor-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{padding-left:24px}.editor-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#06c;text-decoration:underline}.editor-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:4px;font-family:monospace;white-space:pre-wrap}"]})}}return p})();var Z=(()=>{class p{static{this.\u0275fac=function(i){return new(i||p)}}static{this.\u0275mod=x({type:p})}static{this.\u0275inj=T({imports:[v,D,H]})}}return p})();export{q as a,Z as b};

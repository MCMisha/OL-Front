import{a as V,b as L}from"./chunk-CUBDKHQT.js";import{a as te}from"./chunk-RUS2WTEQ.js";import{a as Z,c as ee}from"./chunk-6BIFB6R6.js";import{a as x,b as Q,c as W,d as U,e as q,f as J,g as K,h as X,i as M,j as v,l as Y}from"./chunk-QG3KZPTG.js";import{a as h}from"./chunk-ZE4P6AXO.js";import"./chunk-BKP4CZB2.js";import{R as S}from"./chunk-PJK7FPEW.js";import"./chunk-Q64FFBLU.js";import{l as F,m as R}from"./chunk-ZZO7MJK5.js";import{$b as O,Ab as p,Bb as f,Db as k,Gb as y,Ib as C,Jc as G,Lb as z,Nb as j,Ob as $,Oc as B,Pb as H,Rb as m,Sb as u,W as _,Wa as l,Xa as g,_b as N,ba as P,e as D,j as I,la as A,ma as w,mb as c,ob as d,ta as E,ua as T,xb as o,yb as r,zb as b}from"./chunk-YKDFZCCH.js";var oe=()=>[2,5,10],re=e=>({highlighted:e});function me(e,n){e&1&&(o(0,"th",17),m(1,"Id"),r())}function le(e,n){if(e&1&&(o(0,"td",18),m(1),r()),e&2){let t=n.$implicit;l(),u(t.id)}}function ce(e,n){e&1&&(o(0,"th",17),m(1,"Nazwa"),r())}function de(e,n){if(e&1&&(o(0,"td",18),m(1),r()),e&2){let t=n.$implicit;l(),u(t.title)}}function se(e,n){e&1&&(o(0,"th",17),m(1,"Gatunek"),r())}function pe(e,n){if(e&1&&(o(0,"td",18),m(1),r()),e&2){let t=n.$implicit,i=C();l(),u(i.getGenreNameById(t.genre))}}function fe(e,n){e&1&&(o(0,"th",17),m(1,"Miejsce"),r())}function ue(e,n){if(e&1&&(o(0,"td",18),m(1),r()),e&2){let t=n.$implicit,i=C();l(),u(i.getPlaceNameById(t.place))}}function he(e,n){e&1&&(o(0,"th",17),m(1,"Czas trwania"),r())}function ge(e,n){if(e&1&&(o(0,"td",18),m(1),r()),e&2){let t=n.$implicit;l(),u(t.duration)}}function Ce(e,n){e&1&&(o(0,"th",17),m(1,"Ilo\u015B\u0107 przerw"),r())}function _e(e,n){if(e&1&&(o(0,"td",18),m(1),r()),e&2){let t=n.$implicit;l(),u(t.breaksCount)}}function Pe(e,n){e&1&&b(0,"tr",19)}function we(e,n){if(e&1){let t=k();o(0,"tr",20),y("click",function(){let a=E(t).$implicit,s=C();return T(s.highlightRow(a))}),r()}if(e&2){let t=n.$implicit,i=C();d("ngClass",O(1,re,i.selectedRowIndex==t.id))}}var ne=(()=>{class e{constructor(t,i,a,s){this.performancesService=t,this.placeService=i,this.genreService=a,this.dialog=s,this.performances=[],this.genres=[],this.places=[],this.displayedColumns=["id","title","genre","place","duration","breaksCount"],this.pageSize=5,this.pageIndex=0,this.paginatedPerfomance=[],this.dataSourceWithPageSize=new Y(this.performances),this.subscription=new D,this.destroy$=new I}ngOnInit(){this.performancesService.getPerformances().pipe(_(this.destroy$)).subscribe(t=>{this.performances=t,this.dataSourceWithPageSize.data=this.performances}),this.genreService.getGenres().pipe(_(this.destroy$)).subscribe(t=>{this.genres=t}),this.placeService.getPlaces().pipe(_(this.destroy$)).subscribe(t=>{this.places=t})}ngAfterViewInit(){this.paginator?this.dataSourceWithPageSize.paginator=this.paginator:console.error("Paginator is not initialized.")}ngOnDestroy(){this.subscription.unsubscribe()}highlightRow(t){this.selectedRowIndex==t.id?(this.selectedRowIndex=0,this.selectedRow=void 0):(this.selectedRowIndex=t.id,this.selectedRow=t)}getGenreNameById(t){return this.genres.find(a=>a.id===t)?.name??""}getPlaceNameById(t){return this.places.find(a=>a.id===t)?.name??""}openDialog(){this.dialog.open(ee,{width:"300px",data:{message:"Czy na pewno chcesz usun\u0105\u0107 ten element?"}}).afterClosed().subscribe(i=>{i&&this.deleteGenre()})}deleteGenre(){this.selectedRow}static{this.\u0275fac=function(i){return new(i||e)(g(V),g(te),g(L),g(Z))}}static{this.\u0275cmp=A({type:e,selectors:[["app-admin-panel-performance"]],viewQuery:function(i,a){if(i&1&&j(h,5),i&2){let s;$(s=H())&&(a.paginator=s.first)}},decls:32,vars:11,consts:[[1,"row","mb-1","d-flex","align-items-center"],[1,"col-auto"],["mat-flat-button","","color","primary","routerLink","new",1,"me-2"],["mat-flat-button","","color","accent",1,"me-2",3,"routerLink","disabled"],["mat-flat-button","","color","warn",3,"click","disabled"],["mat-table","",1,"mat-elevation-z8","pe-2",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","genre"],["matColumnDef","place"],["matColumnDef","duration"],["matColumnDef","breaksCount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageIndex","pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),m(3,"Dodaj"),r()(),o(4,"div",1)(5,"button",3),m(6,"Edytuj"),r()(),o(7,"div",1)(8,"button",4),y("click",function(){return a.openDialog()}),m(9,"Usu\u0144"),r()()(),o(10,"table",5),p(11,6),c(12,me,2,0,"th",7)(13,le,2,1,"td",8),f(),p(14,9),c(15,ce,2,0,"th",7)(16,de,2,1,"td",8),f(),p(17,10),c(18,se,2,0,"th",7)(19,pe,2,1,"td",8),f(),p(20,11),c(21,fe,2,0,"th",7)(22,ue,2,1,"td",8),f(),p(23,12),c(24,he,2,0,"th",7)(25,ge,2,1,"td",8),f(),p(26,13),c(27,Ce,2,0,"th",7)(28,_e,2,1,"td",8),f(),c(29,Pe,1,0,"tr",14)(30,we,1,3,"tr",15),r(),b(31,"mat-paginator",16)),i&2&&(l(5),z("routerLink","",a.selectedRow==null?null:a.selectedRow.id,"/edit"),d("disabled",!a.selectedRow),l(3),d("disabled",!a.selectedRow),l(2),d("dataSource",a.dataSourceWithPageSize),l(19),d("matHeaderRowDef",a.displayedColumns),l(),d("matRowDefColumns",a.displayedColumns),l(),d("pageSize",a.pageSize)("pageIndex",a.pageIndex)("pageSizeOptions",N(10,oe)))},dependencies:[G,F,S,J,Q,U,q,M,K,h,v,X,x,W],styles:[".highlighted[_ngcontent-%COMP%]{background-color:#00f}mat-sidenav-content[_ngcontent-%COMP%]{max-width:100%;overflow-x:hidden}table[_ngcontent-%COMP%]{width:100%;max-width:100%}mat-paginator[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{max-width:100%;overflow-x:hidden}.row[_ngcontent-%COMP%]{width:100%;max-width:100%}"]})}}return e})();var Se=[{path:"",component:ne}],ae=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=w({type:e})}static{this.\u0275inj=P({imports:[R.forChild(Se),R]})}}return e})();var Ze=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=w({type:e})}static{this.\u0275inj=P({imports:[B,ae,S,M,h,v,x]})}}return e})();export{Ze as AdminPanelPerformanceModule};

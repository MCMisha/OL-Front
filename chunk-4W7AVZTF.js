import{a as y}from"./chunk-2WSJMARK.js";import{a as H}from"./chunk-U573P2MG.js";import{a as O}from"./chunk-4AJFHSXC.js";import"./chunk-5IX4ESWY.js";import{a as f}from"./chunk-SKHWJFQN.js";import"./chunk-2BI4R72U.js";import{a as g}from"./chunk-X2L2YWYR.js";import"./chunk-6XXA7HXI.js";import"./chunk-BKP4CZB2.js";import"./chunk-LKYXE3GT.js";import{i as G,k as U,l as $,m as I}from"./chunk-ZFMEALC2.js";import{$a as c,Bb as r,Cb as o,Db as m,Hb as N,Kb as M,Mb as u,Pb as D,Pc as B,Qc as v,Tc as R,Wa as F,Wb as p,Xa as b,Xb as d,Y as w,Yb as E,_a as a,da as P,dc as L,e as x,ec as T,j as z,na as _,oa as C,qb as l,sb as s,va as j,wa as k}from"./chunk-YAIKHCVE.js";var X=()=>[6,9,12],ee=t=>["details",t];function te(t,h){t&1&&m(0,"mat-progress-bar",5)}function ne(t,h){if(t&1&&(r(0,"div",6)(1,"div",7),m(2,"img",8),o(),r(3,"div",9)(4,"h2",10),p(5),o(),r(6,"p",11),p(7),o(),r(8,"p",12),p(9,"Re\u017Cyseria: Waldemar Zawodzi\u0144ski"),o(),r(10,"button",13),p(11," Szczeg\xF3\u0142y "),o()()()),t&2){let e=h.$implicit,n=u();a(2),D("alt",e.title),s("src","data:image/jpeg;base64,"+e.mainImage,b),a(3),d(e.title),a(2),d(n.getGenreNameById(e.genre)),a(3),s("routerLink",T(5,ee,e.id))}}var V=(()=>{class t{constructor(e,n){this.genreService=e,this.performancesService=n,this.performances=[],this.paginatedPerformances=[],this.genres=[],this.subscription=new x,this.$destroy=new z,this.isLoading=!1,this.pageSize=2,this.pageIndex=0}ngOnInit(){this.isLoading=!0,this.subscription.add(this.performancesService.getPerformances().pipe(w(this.$destroy)).subscribe(e=>{this.performances=e,this.updatePaginatedPerformances()})),this.subscription.add(this.genreService.getGenres().pipe(w(this.$destroy)).subscribe(e=>{this.genres=e,this.isLoading=!1}))}getGenreNameById(e){return this.genres.find(i=>i.id===e)?.name??""}updatePaginatedPerformances(){let e=this.pageIndex*this.pageSize,n=e+this.pageSize;this.paginatedPerformances=this.performances.slice(e,n)}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updatePaginatedPerformances()}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(c(H),c(y))}}static{this.\u0275cmp=_({type:t,selectors:[["app-performances"]],decls:5,vars:7,consts:[["class","mb-1","mode","indeterminate",4,"ngIf"],[1,"performances-wrapper"],[1,"performances-grid"],["class","performance-card",4,"ngFor","ngForOf"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mode","indeterminate",1,"mb-1"],[1,"performance-card"],[1,"image-wrapper"],[3,"src","alt"],[1,"card-body"],[1,"title"],[1,"genre"],[1,"director"],["mat-stroked-button","","color","primary",3,"routerLink"]],template:function(n,i){n&1&&(l(0,te,1,0,"mat-progress-bar",0),r(1,"div",1)(2,"div",2),l(3,ne,12,7,"div",3),o()(),r(4,"mat-paginator",4),M("page",function(A){return i.onPageChange(A)}),o()),n&2&&(s("ngIf",i.isLoading),a(3),s("ngForOf",i.paginatedPerformances),a(),s("length",i.performances.length)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",L(6,X)))},dependencies:[B,v,$,f,O,g],styles:['@charset "UTF-8";.performances-wrapper[_ngcontent-%COMP%]{padding:0 24px}.performances-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px;padding:20px 0}.performance-card[_ngcontent-%COMP%]{background:#1c1c1c;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #00000040;transition:transform .2s ease,box-shadow .2s ease}.performance-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #00000059}.image-wrapper[_ngcontent-%COMP%]{width:100%;height:320px}.image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.card-body[_ngcontent-%COMP%]{padding:16px}.card-body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin-bottom:4px}.card-body[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{font-size:14px;color:#c9c9c9;margin-bottom:4px}.card-body[_ngcontent-%COMP%]   .director[_ngcontent-%COMP%]{font-size:13px;color:#9a9a9a;margin-bottom:12px}.card-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}@media (max-width: 480px){.performances-wrapper[_ngcontent-%COMP%]{padding:0 16px}.image-wrapper[_ngcontent-%COMP%]{height:220px}.title[_ngcontent-%COMP%]{font-size:18px}}']})}}return t})();function ie(t,h){t&1&&m(0,"mat-progress-bar",2)}function re(t,h){if(t&1){let e=N();r(0,"div",3)(1,"div",4),m(2,"img",5),o(),r(3,"div",6)(4,"h1",7),p(5),o(),r(6,"div",8)(7,"span",9),p(8),o(),r(9,"span",10),p(10),o(),r(11,"span",11),p(12,"Re\u017Cyseria: Waldemar Zawodzi\u0144ski"),o()(),m(13,"p",12),r(14,"button",13),M("click",function(){j(e);let i=u();return k(i.goBack())}),p(15," Wr\xF3\u0107 "),o()()()}if(t&2){let e=u();a(2),s("src","data:image/jpeg;base64,"+e.performance.mainImage,b)("alt",e.performance.title),a(3),d(e.performance.title),a(3),d(e.performance.genreNavigation==null?null:e.performance.genreNavigation.name),a(2),E("Miejsce: ",e.performance.placeNavigation==null?null:e.performance.placeNavigation.name,""),a(3),s("innerHTML",e.performance.description,F)}}var W=(()=>{class t{constructor(e,n,i){this.route=e,this.router=n,this.service=i,this.isLoading=!0,this.sub=new x}ngOnInit(){this.sub.add(this.route.paramMap.subscribe(e=>{let n=Number(e.get("id"));n&&this.loadPerformance(n)}))}loadPerformance(e){this.sub.add(this.service.getPerformanceById(e).subscribe(n=>{this.performance=n,this.isLoading=!1}))}goBack(){this.router.navigate(["/performances"])}ngOnDestroy(){this.sub.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(c(G),c(U),c(y))}}static{this.\u0275cmp=_({type:t,selectors:[["app-performances-details"]],decls:2,vars:2,consts:[["mode","indeterminate",4,"ngIf"],["class","details-wrapper",4,"ngIf"],["mode","indeterminate"],[1,"details-wrapper"],[1,"image-section"],[3,"src","alt"],[1,"info-section"],[1,"title"],[1,"meta"],[1,"genre"],[1,"place"],[1,"director"],[1,"description",3,"innerHTML"],["mat-stroked-button","","color","accent",3,"click"]],template:function(n,i){n&1&&l(0,ie,1,0,"mat-progress-bar",0)(1,re,16,6,"div",1),n&2&&(s("ngIf",i.isLoading),a(),s("ngIf",i.performance))},dependencies:[v,f,g],styles:['@charset "UTF-8";.details-wrapper[_ngcontent-%COMP%]{display:flex;gap:32px;padding:24px;flex-wrap:wrap}.image-section[_ngcontent-%COMP%]{flex:1 1 40%;min-width:320px}.image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:12px;object-fit:cover;max-height:600px;box-shadow:0 4px 20px #0006}.info-section[_ngcontent-%COMP%]{flex:1 1 50%;min-width:320px}.info-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:12px}.info-section[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;font-size:16px;margin-bottom:20px}.info-section[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{font-weight:600}.info-section[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:17px;line-height:1.7;margin-bottom:24px;font-weight:400;max-width:700px}.info-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:12px;margin-top:16px}@media (max-width: 600px){.details-wrapper[_ngcontent-%COMP%]{padding:16px}.title[_ngcontent-%COMP%]{font-size:26px!important}}']})}}return t})();var oe=[{path:"",component:V},{path:"details/:id",component:W}],Z=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=C({type:t})}static{this.\u0275inj=P({imports:[I.forChild(oe),I]})}}return t})();var we=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=C({type:t})}static{this.\u0275inj=P({imports:[R,Z,f,O,g]})}}return t})();export{we as PerformancesModule};

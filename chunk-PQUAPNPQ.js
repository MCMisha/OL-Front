import{a as N}from"./chunk-J7GJHSDF.js";import{a as G}from"./chunk-PWU7PBFR.js";import{a as f}from"./chunk-SIWY5EPZ.js";import{b as c}from"./chunk-ZPREHPN2.js";import"./chunk-BKP4CZB2.js";import"./chunk-L27DTTLD.js";import"./chunk-6XXA7HXI.js";import{m as u}from"./chunk-G5IVLWJY.js";import{$b as O,Ab as l,Hb as M,Jb as _,Kc as j,Lc as w,Mb as b,Oc as F,Tb as h,Ua as S,Ub as C,Vb as z,W as g,Xa as r,Ya as d,ba as s,e as y,j as x,la as v,ma as p,nb as I,pb as o,yb as a,zb as m}from"./chunk-DQM3UAK6.js";var D=()=>[2,5,10];function E(t,P){t&1&&l(0,"mat-progress-bar",3)}function R(t,P){if(t&1&&(a(0,"div",4)(1,"div",5),l(2,"img",6),a(3,"div",7)(4,"span",8),h(5),m(),a(6,"span",9),h(7),m()()()()),t&2){let e=P.$implicit,i=_();r(2),b("alt",e.title),o("src","data:image/jpeg;base64,"+e.mainImage,S),r(3),C(e.title),r(2),z(" ",i.getGenreNameById(e.genre)," \u2014 Waldemar Zawodzi\u0144ski ")}}var L=(()=>{class t{constructor(e,i){this.genreService=e,this.performancesService=i,this.performances=[],this.paginatedPerformances=[],this.genres=[],this.subscription=new y,this.$destroy=new x,this.isLoading=!1,this.pageSize=2,this.pageIndex=0}ngOnInit(){this.isLoading=!0,this.subscription.add(this.performancesService.getPerformances().pipe(g(this.$destroy)).subscribe(e=>{this.performances=e,this.updatePaginatedPerformances()})),this.subscription.add(this.genreService.getGenres().pipe(g(this.$destroy)).subscribe(e=>{this.genres=e,this.isLoading=!1}))}getGenreNameById(e){return this.genres.find(n=>n.id===e)?.name??""}updatePaginatedPerformances(){let e=this.pageIndex*this.pageSize,i=e+this.pageSize;this.paginatedPerformances=this.performances.slice(e,i)}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.updatePaginatedPerformances()}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(d(G),d(N))}}static{this.\u0275cmp=v({type:t,selectors:[["app-performances"]],decls:3,vars:7,consts:[["class","mb-1","mode","indeterminate",4,"ngIf"],["class","performance-wrapper",4,"ngFor","ngForOf"],[3,"page","length","pageSize","pageIndex","pageSizeOptions"],["mode","indeterminate",1,"mb-1"],[1,"performance-wrapper"],[1,"performance-card"],[1,"performance-image",3,"src","alt"],[1,"performance-info"],[1,"performance-title"],[1,"text-muted"]],template:function(i,n){i&1&&(I(0,E,1,0,"mat-progress-bar",0)(1,R,8,4,"div",1),a(2,"mat-paginator",2),M("page",function($){return n.onPageChange($)}),m()),i&2&&(o("ngIf",n.isLoading),r(),o("ngForOf",n.paginatedPerformances),r(),o("length",n.performances.length)("pageSize",n.pageSize)("pageIndex",n.pageIndex)("pageSizeOptions",O(6,D)))},dependencies:[j,w,f,c],styles:[".performance-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.performance-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;width:500px;margin-bottom:20px}.performance-image[_ngcontent-%COMP%]{width:50%;height:auto;margin-right:16px;object-fit:cover}.performance-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.performance-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600}mat-paginator[_ngcontent-%COMP%]{display:flex;justify-content:center}"]})}}return t})();var k=[{path:"",component:L}],T=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=p({type:t})}static{this.\u0275inj=s({imports:[u.forChild(k),u]})}}return t})();var oe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=p({type:t})}static{this.\u0275inj=s({imports:[F,T,f,c]})}}return t})();export{oe as PerformancesModule};
